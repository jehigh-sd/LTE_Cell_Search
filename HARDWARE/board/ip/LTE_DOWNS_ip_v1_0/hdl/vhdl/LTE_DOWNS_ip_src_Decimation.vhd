-- -------------------------------------------------------------
-- 
-- File Name: hdl_prj\hdlsrc\zynqRadioHWSWLTEDecimatorRFSoC2x2\LTE_DOWNS_ip_src_Decimation.vhd
-- Created: 2022-05-25 15:55:22
-- 
-- Generated by MATLAB 9.12 and HDL Coder 3.20
-- 
-- -------------------------------------------------------------


-- -------------------------------------------------------------
-- 
-- Module: LTE_DOWNS_ip_src_Decimation
-- Source Path: zynqRadioHWSWLTEDecimatorRFSoC2x2/LTE_DOWNSAMPLE_HDL/DOWNSAMPLE/Vector Decimator/Decimation
-- Hierarchy Level: 3
-- 
-- -------------------------------------------------------------
LIBRARY IEEE;
USE IEEE.std_logic_1164.ALL;
USE IEEE.numeric_std.ALL;
USE work.LTE_DOWNS_ip_src_LTE_DOWNSAMPLE_HDL_pac.ALL;

ENTITY LTE_DOWNS_ip_src_Decimation IS
  PORT( clk                               :   IN    std_logic;
        reset_x                           :   IN    std_logic;
        enb                               :   IN    std_logic;
        din_real_0                        :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_real_1                        :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_real_2                        :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_real_3                        :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_real_4                        :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_real_5                        :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_real_6                        :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_real_7                        :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_img_0                         :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_img_1                         :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_img_2                         :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_img_3                         :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_img_4                         :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_img_5                         :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_img_6                         :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        din_img_7                         :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        vin_real                          :   IN    std_logic;
        vin_img                           :   IN    std_logic;
        dout_re                           :   OUT   std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        dout_im                           :   OUT   std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
        vout                              :   OUT   std_logic
        );
END LTE_DOWNS_ip_src_Decimation;


ARCHITECTURE rtl OF LTE_DOWNS_ip_src_Decimation IS

  -- Component Declarations
  COMPONENT LTE_DOWNS_ip_src_FIR_Decimation_HDL_Optimized1
    PORT( clk                             :   IN    std_logic;
          reset_x                         :   IN    std_logic;
          enb                             :   IN    std_logic;
          dataIn_re_0                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_re_1                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_re_2                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_re_3                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_re_4                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_re_5                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_re_6                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_re_7                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_im_0                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_im_1                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_im_2                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_im_3                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_im_4                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_im_5                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_im_6                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataIn_im_7                     :   IN    std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          validIn                         :   IN    std_logic;
          dataOut_re                      :   OUT   std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          dataOut_im                      :   OUT   std_logic_vector(15 DOWNTO 0);  -- sfix16_En15
          validOut                        :   OUT   std_logic
          );
  END COMPONENT;

  -- Component Configuration Statements
  FOR ALL : LTE_DOWNS_ip_src_FIR_Decimation_HDL_Optimized1
    USE ENTITY work.LTE_DOWNS_ip_src_FIR_Decimation_HDL_Optimized1(rtl);

  -- Signals
  SIGNAL din_real                         : vector_of_signed16(0 TO 7);  -- sfix16_En15 [8]
  SIGNAL Delay2_out1                      : vector_of_signed16(0 TO 7);  -- sfix16_En15 [8]
  SIGNAL din_img                          : vector_of_signed16(0 TO 7);  -- sfix16_En15 [8]
  SIGNAL Delay3_out1                      : vector_of_signed16(0 TO 7);  -- sfix16_En15 [8]
  SIGNAL Delay_out1                       : std_logic;
  SIGNAL Delay1_out1                      : std_logic;
  SIGNAL Logical_Operator_out1            : std_logic;
  SIGNAL FIR_Decimation_HDL_Optimized1_out1_re : std_logic_vector(15 DOWNTO 0);  -- ufix16
  SIGNAL FIR_Decimation_HDL_Optimized1_out1_im : std_logic_vector(15 DOWNTO 0);  -- ufix16
  SIGNAL FIR_Decimation_HDL_Optimized1_out2 : std_logic;

BEGIN
  u_FIR_Decimation_HDL_Optimized1 : LTE_DOWNS_ip_src_FIR_Decimation_HDL_Optimized1
    PORT MAP( clk => clk,
              reset_x => reset_x,
              enb => enb,
              dataIn_re_0 => std_logic_vector(Delay2_out1(0)),  -- sfix16_En15
              dataIn_re_1 => std_logic_vector(Delay2_out1(1)),  -- sfix16_En15
              dataIn_re_2 => std_logic_vector(Delay2_out1(2)),  -- sfix16_En15
              dataIn_re_3 => std_logic_vector(Delay2_out1(3)),  -- sfix16_En15
              dataIn_re_4 => std_logic_vector(Delay2_out1(4)),  -- sfix16_En15
              dataIn_re_5 => std_logic_vector(Delay2_out1(5)),  -- sfix16_En15
              dataIn_re_6 => std_logic_vector(Delay2_out1(6)),  -- sfix16_En15
              dataIn_re_7 => std_logic_vector(Delay2_out1(7)),  -- sfix16_En15
              dataIn_im_0 => std_logic_vector(Delay3_out1(0)),  -- sfix16_En15
              dataIn_im_1 => std_logic_vector(Delay3_out1(1)),  -- sfix16_En15
              dataIn_im_2 => std_logic_vector(Delay3_out1(2)),  -- sfix16_En15
              dataIn_im_3 => std_logic_vector(Delay3_out1(3)),  -- sfix16_En15
              dataIn_im_4 => std_logic_vector(Delay3_out1(4)),  -- sfix16_En15
              dataIn_im_5 => std_logic_vector(Delay3_out1(5)),  -- sfix16_En15
              dataIn_im_6 => std_logic_vector(Delay3_out1(6)),  -- sfix16_En15
              dataIn_im_7 => std_logic_vector(Delay3_out1(7)),  -- sfix16_En15
              validIn => Logical_Operator_out1,
              dataOut_re => FIR_Decimation_HDL_Optimized1_out1_re,  -- sfix16_En15
              dataOut_im => FIR_Decimation_HDL_Optimized1_out1_im,  -- sfix16_En15
              validOut => FIR_Decimation_HDL_Optimized1_out2
              );

  din_real(0) <= signed(din_real_0);
  din_real(1) <= signed(din_real_1);
  din_real(2) <= signed(din_real_2);
  din_real(3) <= signed(din_real_3);
  din_real(4) <= signed(din_real_4);
  din_real(5) <= signed(din_real_5);
  din_real(6) <= signed(din_real_6);
  din_real(7) <= signed(din_real_7);

  Delay2_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        Delay2_out1 <= (OTHERS => to_signed(16#0000#, 16));
      ELSIF enb = '1' THEN
        Delay2_out1 <= din_real;
      END IF;
    END IF;
  END PROCESS Delay2_process;


  din_img(0) <= signed(din_img_0);
  din_img(1) <= signed(din_img_1);
  din_img(2) <= signed(din_img_2);
  din_img(3) <= signed(din_img_3);
  din_img(4) <= signed(din_img_4);
  din_img(5) <= signed(din_img_5);
  din_img(6) <= signed(din_img_6);
  din_img(7) <= signed(din_img_7);

  Delay3_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        Delay3_out1 <= (OTHERS => to_signed(16#0000#, 16));
      ELSIF enb = '1' THEN
        Delay3_out1 <= din_img;
      END IF;
    END IF;
  END PROCESS Delay3_process;


  Delay_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        Delay_out1 <= '0';
      ELSIF enb = '1' THEN
        Delay_out1 <= vin_real;
      END IF;
    END IF;
  END PROCESS Delay_process;


  Delay1_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        Delay1_out1 <= '0';
      ELSIF enb = '1' THEN
        Delay1_out1 <= vin_img;
      END IF;
    END IF;
  END PROCESS Delay1_process;


  Logical_Operator_out1 <= Delay_out1 AND Delay1_out1;

  dout_re <= FIR_Decimation_HDL_Optimized1_out1_re;

  dout_im <= FIR_Decimation_HDL_Optimized1_out1_im;

  vout <= FIR_Decimation_HDL_Optimized1_out2;

END rtl;

